const path = require('path')
const fs = require('fs-extra')

const markup = `{% comment %} This file is auto-generated by theme-envy. DO NOT EDIT. {% endcomment %}
${ThemeEnvy?.tailwind !== false ? '{{ \'theme-envy.critical.css\' | asset_url | stylesheet_tag: preload: true }}' : ''}
<script>
(function() {
  const assetUrl = {{ 'image.jpg' | asset_url | json }};
  window.ThemeEnvy = window.ThemeEnvy || {};
  window.ThemeEnvy.publicPath = assetUrl.substring(0, assetUrl.lastIndexOf('/') + 1);
})();
</script>
<script src="{{ 'theme-envy.js' | asset_url }}" defer></script>`

fs.writeFileSync(path.resolve(__dirname, '../theme-envy.liquid'), markup, 'utf8')
